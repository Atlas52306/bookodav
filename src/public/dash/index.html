<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="utf-8" >
		<meta name="viewport" content="width=device-width, initial-scale=1" >
		<meta name="color-scheme" content="light dark" >
		<meta name="description" content="一个自托管的WebDAV服务器，用于在KOReader和其他客户端之间传输图书。" >
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@yohns/picocss@2.2.10/css/pico.min.css" >
		<style>
			.footer {
				display: flex;
				align-items: center;
				justify-content: space-between;
			}
			 .w3c {
				width: 64px;
			}
			.image{
				width: 600px;
			}
		</style>
		<title>Booko-DAV</title>
	</head>

	<body>
		<header class="container">
			<nav>
				<ul class="contrast">
					<li><strong>Booko-DAV</strong></li>
				</ul>
				<ul>
					<li>
						<small>
							<a href="/dav">控制面板</a>
						</small>
					</li>
				</ul>
			</nav>
		</header>
		<main class="container">
			<article>
				<h3>这是什么？</h3>
				<p>
					Booko-DAV 是"书籍"、
					<a href="https://koreader.rocks/" target="_blank">KOReader</a> 和 <a href="https://en.wikipedia.org/wiki/WebDAV">WebDAV</a> 的组合词。
				</p>
				<p>
					它主要设计用作WebDAV服务器，用于在PC、手机和电子阅读器（在我的例子中是越狱的Kindle）之间传输和存储书籍。它可以自托管且<strong>基本免费</strong><em>（确切地说是每月10GB）</em>。
					<a href="#pricing">查看价格</a>。
				</p>
			</article>

			<article>
				<h3>为什么要做这个？</h3>
				<p>
					为了乐趣。市面上有很多WebDAV服务，但我想创建自己的版本，专门针对电子书社区，具有易部署和低成本的特点。
				</p>
			</article>
			<article>
				<h3>如何使用？</h3>
				<h4>要求：Cloudflare账户、GitHub账户、移动设备或PC，以及信用卡。</h4>
				<p>
					<em>* 注意：以下所有链接都会在新标签页中打开，方便使用 *</em>
				</p>
				<ol>
					<li>
						<h5>设置Cloudflare账户</h5>
						<ul>
							<li>
								前往 <a href="https://dash.cloudflare.com/login" target="_blank">Cloudflare控制面板</a> 并创建账户（可使用Google登录）。如果已有账户，请登录。
							</li>
							<li>在控制面板侧边栏，前往 <strong>R2对象存储</strong>。完成账单详情并提交。</li>
							<li>在R2对象存储下，点击 <strong>+ 创建存储桶</strong></li>
							<li>
								<strong>将存储桶命名为 <u>bookodav</u></strong>（区分大小写）
							</li>
							<li>
								<img class="image" src="https://res.cloudinary.com/dt1unishx/image/upload/v1745350922/Screenshot_2025-04-23_000023_jbdwnb.png" alt="存储桶示例">
							</li>
							<li>保留默认选项并创建存储桶。</li>
							<li>通过个人资料菜单前往 <a target="_blank" href="https://dash.cloudflare.com/profile/api-tokens">API令牌</a>。</li>
							<li>
								点击 <strong><u>创建令牌</u></strong> 并选择 <strong>编辑Cloudflare Workers</strong> 模板。
							</li>
							<li>在账户资源下拉菜单中选择您的账户，在区域资源下选择所有区域。</li>
							<li>
								<img class="image" src="https://res.cloudinary.com/dt1unishx/image/upload/v1745350938/Screenshot_2025-04-23_000214_mq4jzd.png" alt="令牌示例">
							</li>
							<li>创建令牌并保存。从控制面板URL保存您的账户ID (https://dash.cloudflare.com/{AccountId}/home)。</li>
						</ul>
					</li>
					<li>
						<h5>GitHub账户</h5>
						<ul>
							<li>创建/登录到 <a target="_blank" href="https://github.com/">GitHub</a></li>
							<li>访问 <a target="_blank" href="https://github.com/Joshuajrodrigues/bookodav">仓库</a></li>
							<li>通过点击此处复刻它</li>
							<li>
								<img class="image" src="https://res.cloudinary.com/dt1unishx/image/upload/v1745350980/Screenshot_2025-04-23_003503_enhe6n.png" alt="复刻">
							</li>
							<li>前往设置 =&gt; 密钥和变量 =&gt; 操作</li>
							<li>点击新建仓库密钥</li>
							<li>
								<img class="image" src="https://res.cloudinary.com/dt1unishx/image/upload/v1745350950/Screenshot_2025-04-23_002507_hw0ugn.png" alt="密钥">
							</li>
							<li>添加名称为CF_API_TOKEN</li>
							<li>在密钥*部分粘贴您之前创建的API密钥，点击添加密钥</li>
							<li>前往操作并启用工作流</li>
							<li>
								<img class="image" src="https://res.cloudinary.com/dt1unishx/image/upload/v1745350953/Screenshot_2025-04-23_002632_zuevrs.png" alt="操作">
							</li>
							<li>
								前往部署并点击运行工作流
							</li>
							<li>
								<img class="image" src="https://res.cloudinary.com/dt1unishx/image/upload/v1745350959/Screenshot_2025-04-23_002655_c98byf.png" alt="工作流">
							</li>
							<li>
								如果再次点击操作，您应该会看到这个
							</li>
							<li><img class="image" src="https://res.cloudinary.com/dt1unishx/image/upload/v1745350957/Screenshot_2025-04-23_002741_ssiydj.png" alt="工作流完成"></li>
						</ul>
					</li>
					<li>
						<h5>访问</h5>
						<ul>
							<li>在Cloudflare控制面板中，前往计算 → Workers → <b>bookodav-worker</b>。</li>
							<li>
								<img class="image" src="https://res.cloudinary.com/dt1unishx/image/upload/v1745350965/Screenshot_2025-04-23_002806_hww0vf.png" alt="访问">
							</li>
							<li>在设置 → 变量下，选择类型为SECRET，添加USERNAME和PASSWORD（区分大小写）并部署。</li>
							<li>
								<img class="image" src="https://res.cloudinary.com/dt1unishx/image/upload/v1745350990/Screenshot_2025-04-23_004933_nyxilz.png" alt="用户名">
							</li>
							<li>
								<img class="image" src="https://res.cloudinary.com/dt1unishx/image/upload/v1745350991/Screenshot_2025-04-23_004847_msorqy.png" alt="密码">
							</li>
							<li>在workers.dev域名找到您的访问URL（例如，bookodav-worker.username.workers.dev/dav）。</li>
							<li>
								<img class="image" src="https://res.cloudinary.com/dt1unishx/image/upload/v1745350977/Screenshot_2025-04-23_002855_squ7f8.png" alt="访问">
							</li>
						</ul>
					</li>
				</ol>
			</article>
			<article>
				<h3>重要链接</h3>
				<ol>
					<li>
						<a target="_blank" href="http://dash.cloudflare.com">Cloudflare控制面板</a>
						<p>监控存储、请求和账单。比内置文档表格更好用。</p>
					</li>
					<li id="pricing">
						<a target="_blank" href="https://developers.cloudflare.com/r2/pricing/">Cloudflare R2定价</a>
						<p>10GB免费存储。大量缓存可减少账单，但可能导致轻微的不一致。</p>
					</li>
					<li>
						<a target="_blank" href="https://developers.cloudflare.com/workers/platform/pricing/">Cloudflare Workers定价</a>
						<p>每日包含100,000次请求（上传、下载、删除）。</p>
					</li>
					<li>
						<p>
							Booko-DAV使用Cloudflare Workers技术。
							<a target="_blank" href="https://developers.cloudflare.com/workers/reference/how-workers-works/">
								了解更多关于Workers的信息。
							</a>
						</p>
					</li>
				</ol>
			</article>

			<footer class="footer">
				<span> <span id="year"></span> © Joshua Rodrigues </span>
				<a href="https://html5.validator.nu/?doc=https%3A%2F%2Fbookodav.joshuarodrigues.dev">
					<img
						loading="lazy"
						class="w3c"
						src="https://github.com/bradleytaunt/html5-validator-badge/blob/master/html5-validator-badge-blue.png?raw=true"
						alt="HTML5有效"
					>
				</a>
			</footer>
		</main>
		<script>
			document.querySelector('#year').textContent = new Date().getFullYear();
		</script>
	</body>
</html>
